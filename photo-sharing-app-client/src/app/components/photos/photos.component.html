<div class="photos-container row">
  <nav class="navbar navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand">Photos</a>
      <div class="d-flex">
        <button
          type="button"
          class="btn btn-outline-secondary"
          (click)="selectActionClicked()"
        >
          {{ actionBtn }}
        </button>

        <div *ngIf="isSelectionEnabled">
          <button type="button" class="btn btn-info" aria-label="deletePhoto" title="Delete Photo" data-bs-toggle="tooltip" data-bs-placement="left" (click)="deletePhotos()">
            <i class="fas fa-trash trash-icon"></i>
          </button>
          <!-- <button type="button" class="btn btn-info"><i class="fa-solid fa-download"></i></button> -->
        </div>

        <!-- User profile dropdown -->
        <div class="btn-group" dropdown [insideClick]="true">
          <button
            dropdownToggle
            type="button"
            class="btn btn-outline-secondary dropdown-toggle"
          >
            <i class="fa-solid fa-user"></i>
            <span class="caret"></span>
          </button>
          <ul
            *dropdownMenu
            class="dropdown-menu dropdown-menu-right"
            role="menu"
          >
            <li role="menuitem">
              <a
                class="dropdown-item"
                data-bs-toggle="modal"
                data-bs-target="#addPhotoModal"
              >
                <!-- <i class="fas fa-solid fa-cloud-arrow-up"></i>  -->
                Upload photo</a
              >
            </li>
            <li role="menuitem">
              <a class="dropdown-item" (click)="logout()"
                >Logout
                <i class="fas fa-light fa-right-from-bracket"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <div
    class="row spinner-container"
    *ngIf="spinnerService.isSpinnerVisible || allPhotos.length == 0"
  >
    <div class="d-flex justify-content-center">
      <!-- Spinner -->
      <div
        class="spinner-border"
        style="width: 3rem; height: 3rem"
        role="status"
        *ngIf="spinnerService.isSpinnerVisible"
      >
        <span class="visually-hidden">Loading...</span>
      </div>
      <!-- No images uploaded -->
      <div *ngIf="!spinnerService.isSpinnerVisible && allPhotos.length == 0">
        <img src="../../assets/No-image-available.jpg" alt="" />
      </div>
    </div>
  </div>

  <div
    class="row"
    style="display: flex"
    *ngIf="!spinnerService.isSpinnerVisible && allPhotos.length > 0"
  >
    <div
      *ngFor="let photo of allPhotos"
      class="card col-md-3 col-lg-3 col-sm-3"
      style="width: 18rem; margin: 5px 5px" [ngClass]="{'selected-image':photo.checked, 'enable-selection':isSelectionEnabled }" (click)="onPhotoDivClick(photo)"
    >
      <div class="image-container">
        <img [src]="photo.blobImage" class="card-img-top" alt="..." />
        <div class="selection-checkbox" *ngIf="isSelectionEnabled">
          <input
            class="form-check-input"
            type="checkbox"
            id="checkboxNoLabel"
            value=""
            aria-label="photoCheckbox"
            style="cursor: pointer" 
            [(ngModel)]="photo.checked" (change)="onphotoSelect(photo)"
          />
        </div>
        <!-- <span class="delete-icon-container" (click)="deletePhoto(photo.id)">
          <i class="fas fa-trash trash-icon"></i>
        </span> -->
      </div>
      <div class="card-body">
        <h5 class="card-title">{{ photo.title }}</h5>
        <p class="card-text">
          {{ photo.description }}
        </p>
      </div>
    </div>
  </div>
</div>

<div
  #addPhotoModal
  class="modal fade"
  id="addPhotoModal"
  tabindex="-1"
  aria-labelledby="addPhotoModalLabel"
  aria-hidden="true"
>
  <app-add-photo (updateImageDataEvent)="getPhotos()"></app-add-photo>
</div>
