<div class="photos-container row">
  <!-- Navbar -->
  <app-navbar
    [allPhotos]="allPhotos"
    [selectedPhotos]="selectedPhotos"
    [isSelectionEnabled]="isSelectionEnabled"
    [actionBtn]="actionBtn"
    (deletePhotosEvent)="deletePhotos()"
    (selectActionEvent)="selectActionClicked()"
  ></app-navbar>

  <!-- Spinner -->
  <div class="row spinner-container" *ngIf="spinnerService.isSpinnerVisible">
    <div class="d-flex justify-content-center">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  </div>

  <!-- Photos section -->
  <div
    class="row photos-section"
    *ngIf="!spinnerService.isSpinnerVisible"
  >
    <!-- Upload new image card -->
    <div
      class="card col-md-3 col-lg-3 col-sm-3 upload-image-card"
      data-bs-toggle="modal"
      data-bs-target="#addPhotoModal"
    >
      <div class="card-body">
        <i class="fa-sharp fa-solid fa-plus"></i>
        <h5 class="card-title">Upload Photo</h5>
      </div>
    </div>

    <!-- Uploaded images -->
    <ng-container *ngIf="allPhotos.length > 0">
      <div
        *ngFor="let photo of allPhotos"
        class="card col-md-3 col-lg-3 col-sm-3"
        [ngClass]="{
          'selected-image': photo.checked,
          'enable-selection': isSelectionEnabled
        }"
        (click)="isSelectionEnabled ? onPhotoDivClick(photo) : ''"
      >
        <div class="image-container">
          <img [src]="photo.blobImage" class="card-img-top" alt="..." />
          <div class="selection-checkbox" *ngIf="isSelectionEnabled">
            <input
              class="form-check-input"
              type="checkbox"
              id="checkboxNoLabel"
              value=""
              aria-label="photoCheckbox"
              style="cursor: pointer"
              [(ngModel)]="photo.checked"
              (change)="onphotoSelect(photo)"
            />
          </div>
        </div>
        <div class="card-body">
          <h5 class="card-title">{{ photo.title }}</h5>
          <p class="card-text">
            {{ photo.description }}
          </p>
        </div>
      </div>
    </ng-container>
  </div>
</div>

<!-- Add new photo modal -->
<div
  #addPhotoModal
  class="modal fade"
  id="addPhotoModal"
  tabindex="-1"
  aria-labelledby="addPhotoModalLabel"
  aria-hidden="true"
>
  <app-add-photo (updateImageDataEvent)="getPhotos()"></app-add-photo>
</div>
